{% extends 'base.html.twig' %}

{% block title %}
  Homepage
{% endblock %}

{% block body %}
  <div class="h-full w-full">
    {% include 'header.html.twig' %}
    <div class="container my-6 mx-auto flex flex-col items-center justify-center px-6 pb-6">
      <div class="space-y-2">
        <h1 class="font-black text-6xl text-center text-indigo-900">Linkr</h1>
        <h2 class="text-center text-xl">Make your link shorter</h2>
      </div>
    </div>
    <div class="container mx-auto px-6">
      {{ form_start(form) }}
      <div class="flex flex-col items-center justify-center">
        <div class="flex flex-col items-center justify-center my-4">
          <div class="flex items-center justify-center space-x-4">
            <div class="relative text-indigo-900">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                  <path d="M12.232 4.232a2.5 2.5 0 013.536 3.536l-1.225 1.224a.75.75 0 001.061 1.06l1.224-1.224a4 4 0 00-5.656-5.656l-3 3a4 4 0 00.225 5.865.75.75 0 00.977-1.138 2.5 2.5 0 01-.142-3.667l3-3z" />
                  <path d="M11.603 7.963a.75.75 0 00-.977 1.138 2.5 2.5 0 01.142 3.667l-3 3a2.5 2.5 0 01-3.536-3.536l1.225-1.224a.75.75 0 00-1.061-1.06l-1.224 1.224a4 4 0 105.656 5.656l3-3a4 4 0 00-.225-5.865z" />
                </svg>
              </span>
              {{ form_widget(form.fullLink, { attr: { class: 'input border-indigo-900 placeholder:text-indigo-900 pl-10', placeholder: 'Shorten your link' } }) }}
            </div>
            <div class="relative text-indigo-900">
              <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                  <path fill-rule="evenodd" d="M9.493 2.853a.75.75 0 00-1.486-.205L7.545 6H4.198a.75.75 0 000 1.5h3.14l-.69 5H3.302a.75.75 0 000 1.5h3.14l-.435 3.148a.75.75 0 001.486.205L7.955 14h2.986l-.434 3.148a.75.75 0 001.486.205L12.456 14h3.346a.75.75 0 000-1.5h-3.14l.69-5h3.346a.75.75 0 000-1.5h-3.14l.435-3.147a.75.75 0 00-1.486-.205L12.045 6H9.059l.434-3.147zM8.852 7.5l-.69 5h2.986l.69-5H8.852z" clip-rule="evenodd" />
                </svg>
              </span>
              {{ form_widget(form.link, { attr: { class: 'input border-indigo-900 placeholder:text-indigo-900 pl-10 w-28', placeholder: 'Postfix' } }) }}
            </div>
          </div>
        </div>
        <button type="submit" class="btn btn-primary">Shorten</button>
      </div>
      {{ form_end(form) }}
      {% for message in app.flashes('successGetLink') %}
        <div class="flex items-center justify-center my-4">
          <div class="flex items-center justify-center space-x-4 bg-neutral-50 shadow shadow-black/25 rounded-lg p-6">
            <div>
              Your shorten link: <a href="{{ message }}">{{ message }}</a>
            </div>
            <button type="button" id="copyToClipboardBtn" class="btn btn-primary flex items-center" onclick="copyToClipboard('{{ message }}')">
              <div className="pr-1">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
                  <path fill-rule="evenodd" d="M13.887 3.182c.396.037.79.08 1.183.128C16.194 3.45 17 4.414 17 5.517V16.75A2.25 2.25 0 0114.75 19h-9.5A2.25 2.25 0 013 16.75V5.517c0-1.103.806-2.068 1.93-2.207.393-.048.787-.09 1.183-.128A3.001 3.001 0 019 1h2c1.373 0 2.531.923 2.887 2.182zM7.5 4A1.5 1.5 0 019 2.5h2A1.5 1.5 0 0112.5 4v.5h-5V4z" clip-rule="evenodd" />
                </svg>
              </div>Copy link
            </button>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="my-16 flex items-center justify-center">
      <img src="/undraw_link_shortener_mvf6.svg" alt="link_shortener" width="300" height="276" />
    </div>
  </div>
  <script>
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text)
    }
  </script>
{% endblock %}
